# ğŸ“‹ Edge-Detective å¼€å‘é‡Œç¨‹ç¢‘

> **ç›®æ ‡æ¶æ„**: [final_upgrade_blueprint.md](../final_upgrade_blueprint.md)  
> **æ€»å‘¨æœŸ**: 9-13 å‘¨

---

## é‡Œç¨‹ç¢‘æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¼€å‘é‡Œç¨‹ç¢‘æ—¶é—´çº¿                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Phase 1: MVP                    Phase 2: ç”Ÿäº§å¯ç”¨               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Week 1: vLLM é›†æˆ â˜…    â”‚    â”‚ Week 4: å‘é‡åº“+å¯¹è±¡å­˜å‚¨â”‚     â”‚
â”‚  â”‚ Week 2: åŸºç¡€è®¾æ–½       â”‚    â”‚ Week 5: é‡åŒ–æ¨¡å‹       â”‚     â”‚
â”‚  â”‚ Week 3: API+å¼‚æ­¥ä»»åŠ¡   â”‚    â”‚ Week 6: å‰ç«¯éª¨æ¶       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Week 7: æµ‹è¯•+ä¼˜åŒ–      â”‚     â”‚
â”‚         â†“                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚    demo å¯è·‘                            â†“                        â”‚
â”‚                                   ç”Ÿäº§ç¯å¢ƒå¯éƒ¨ç½²                  â”‚
â”‚                                                                  â”‚
â”‚                                  Phase 3: è§„æ¨¡åŒ–                 â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                  â”‚ Week 8-9: å®æ—¶æµ       â”‚     â”‚
â”‚                                  â”‚ Week 10-11: Re-ID+å‘Šè­¦ â”‚     â”‚
â”‚                                  â”‚ Week 12-13: K8s éƒ¨ç½²   â”‚     â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                         â†“                        â”‚
â”‚                                   å·¥ä¸šçº§ç³»ç»Ÿå®Œæˆ                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â˜… = vLLM å¯è¿è¡Œ question_search() çš„æœ€æ—©æ—¶é—´ç‚¹
```

---

## å¼€å‘æ–‡æ¡£ç´¢å¼•

| é˜¶æ®µ | æ–‡æ¡£ | å‘¨æœŸ | æ ¸å¿ƒäº¤ä»˜ |
|------|------|------|----------|
| **Phase 1** | [phase1_mvp.md](./phase1_mvp.md) | 2-3 å‘¨ | vLLM é›†æˆï¼Œdemo å¯è·‘ |
| **Phase 2** | [phase2_production.md](./phase2_production.md) | 3-4 å‘¨ | é‡åŒ–æ¨¡å‹ï¼Œå‰ç«¯ï¼Œç”Ÿäº§éƒ¨ç½² |
| **Phase 3** | [phase3_scale.md](./phase3_scale.md) | 4-6 å‘¨ | å®æ—¶æµï¼ŒK8sï¼Œå·¥ä¸šçº§ |

---

## å…³é”®æ—¶é—´ç‚¹

| æ—¶é—´ç‚¹ | é‡Œç¨‹ç¢‘ | å¯ç”¨åŠŸèƒ½ |
|--------|--------|----------|
| **Week 1 ç»“æŸ** | vLLM é›†æˆå®Œæˆ | `question_search()` å¯ç”¨ vLLM è¿è¡Œ |
| **Week 3 ç»“æŸ** | Phase 1 å®Œæˆ | FastAPI æœåŠ¡ + Celery ä»»åŠ¡ |
| **Week 7 ç»“æŸ** | Phase 2 å®Œæˆ | é‡åŒ–æ¨¡å‹åˆ‡æ¢ + å‰ç«¯å±•ç¤º |
| **Week 13 ç»“æŸ** | Phase 3 å®Œæˆ | å®æ—¶æµ + K8s + å®Œæ•´å·¥ä¸šåŒ– |

---

## å¿«é€Ÿå¼€å§‹

### å¦‚æœä½ åªéœ€è¦ vLLM è·‘ demoï¼ˆä½œä¸šäº¤ä»˜ï¼‰

åªéœ€å®Œæˆ **Phase 1 Week 1**ï¼š

1. åˆ›å»º `src/ports/inference_port.py`
2. åˆ›å»º `src/adapters/inference/vllm_adapter.py`
3. åˆ›å»º `src/domain/value_objects/verification_result.py`
4. ä¿®æ”¹ `src/core/config.py` æ·»åŠ  vLLM é…ç½®
5. ä¿®æ”¹ `src/pipeline/video_semantic_search.py` çš„ `_build_vlm_client()`
6. åœ¨ Colab å¯åŠ¨ vLLM æœåŠ¡
7. è¿è¡Œæµ‹è¯•

è¯¦è§ [phase1_mvp.md - Week 1](./phase1_mvp.md#week-1-vllm-é›†æˆ--æ ¸å¿ƒåˆ†å±‚)

---

## å¾…åˆ é™¤ä»£ç æ€»è§ˆ

> å®Œæ•´é‡æ„åï¼Œä»¥ä¸‹æ—§ä»£ç å°†è¢«åˆ é™¤

| æ—§æ–‡ä»¶ | åˆ é™¤æ—¶é—´ | æ›¿ä»£æ–‡ä»¶ |
|--------|----------|----------|
| `src/pipeline/vlm_client_hf.py` | Phase 2 å¼€å§‹ | `adapters/inference/vllm_adapter.py` |
| `src/pipeline/recall.py` | Phase 2 ç»“æŸ | `application/use_cases/search_tracks.py` |
| `src/pipeline/router*.py` | Phase 2 ç»“æŸ | `application/use_cases/` |
| `src/core/config.py` | Phase 2 ç»“æŸ | `infrastructure/config/` |
| `src/core/perception.py` | Phase 3 ç»“æŸ | `adapters/detection/yolo_adapter.py` |
| `src/core/features.py` | Phase 3 ç»“æŸ | `domain/services/` |
| `src/core/evidence.py` | Phase 3 ç»“æŸ | `domain/entities/` |
| `src/core/*.py` | Phase 3 ç»“æŸ | åˆ†æ•£åˆ°å„å±‚ |
| `src/pipeline/` æ•´ä¸ªç›®å½• | Phase 3 ç»“æŸ | æ–°æ¶æ„å„å±‚ |

---

## æœ€ç»ˆç›®å½•ç»“æ„

å®Œæ•´é‡æ„åçš„ç›®å½•ç»“æ„è§ [phase3_scale.md - æœ€ç»ˆç›®å½•ç»“æ„](./phase3_scale.md#æœ€ç»ˆç›®å½•ç»“æ„)

ä¸ [final_upgrade_blueprint.md - 3.2 ç›®å½•ç»“æ„è®¾è®¡](../final_upgrade_blueprint.md) å®Œå…¨ä¸€è‡´ã€‚

